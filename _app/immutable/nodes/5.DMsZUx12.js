import{c as qe,a as R,f as Q,t as De,e as Je}from"../chunks/dal4uYpS.js";import"../chunks/Drn_hum6.js";import{c as Se,o as Qe,g as Xe}from"../chunks/CIy8foFG.js";import{b1 as Ne,u as me,r as We,aR as Ye,k as Ve,N as ve,b4 as Ze,ah as ea,x as Ee,f as pe,z as $e,E as p,B as j,F as x,D as ne,L as Ke,M as aa,h as e,i as Ie,A as G,y as c,be as ta,aC as ye,bf as ra,a8 as la}from"../chunks/Hoo0YnsJ.js";import{s as he,e as J}from"../chunks/D6btfgi0.js";import{p as B,i as _e,a as na,s as sa}from"../chunks/CzRxEhoK.js";import{s as ie,c as je,e as oa,d as ia,b as oe,f as we,r as ge}from"../chunks/P74NuLE9.js";import{b as ca}from"../chunks/BuxSg4Qt.js";import{i as Ae}from"../chunks/BjaoBnQj.js";import{s as fa,h as ua,B as ze}from"../chunks/XAKTK-uC.js";import{s as Fe}from"../chunks/BDpKkMp0.js";function Le(t,i,d=i){var g=new WeakSet;Ne(t,"input",async o=>{var l=o?t.defaultValue:t.value;if(l=Ce(t)?ke(l):l,d(l),ve!==null&&g.add(ve),await Ye(),l!==(l=i())){var f=t.selectionStart,E=t.selectionEnd,y=t.value.length;if(t.value=l??"",E!==null){var _=t.value.length;f===E&&E===y&&_>y?(t.selectionStart=_,t.selectionEnd=_):(t.selectionStart=f,t.selectionEnd=Math.min(E,_))}}}),(Ve&&t.defaultValue!==t.value||me(i)==null&&t.value)&&(d(Ce(t)?ke(t.value):t.value),ve!==null&&g.add(ve)),We(()=>{var o=i();if(t===document.activeElement){var l=Ze??ve;if(g.has(l))return}Ce(t)&&o===ke(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function va(t,i,d=i){Ne(t,"change",g=>{var o=g?t.defaultChecked:t.checked;d(o)}),(Ve&&t.defaultChecked!==t.checked||me(i)==null)&&d(t.checked),We(()=>{var g=i();t.checked=!!g})}function Ce(t){var i=t.type;return i==="number"||i==="range"}function ke(t){return t===""?null:+t}function da(t,i){var l;var d=(l=t.$$events)==null?void 0:l[i.type],g=ea(d)?d.slice():d==null?[]:[d];for(var o of g)o.call(this,i)}const ma=!1,_a=!1;throw new Error("A rota /admin só está disponível em desenvolvimento.");const Va=Object.freeze(Object.defineProperty({__proto__:null,prerender:ma,ssr:_a},Symbol.toStringTag,{value:"Module"}));function ga(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var de={exports:{}},ba=de.exports,Be;function ha(){return Be||(Be=1,(function(t,i){(function(){function d(o,O){var f="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF",E=f+"\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",y=new RegExp(`.*((\r|
)+)`),_=new RegExp("^\\s*([^"+E+`]+)[ 	\r]*:[ 	\r]*(.*(?:
|\r|$))`),C=new RegExp(`^\\s*:[ 	\r]*(endskip|ignore|skip|end).*?(
|\r|$)`,"i"),S=new RegExp(`^\\s*\\*[ 	\r]*(.*(?:
|\r|$))`),m=new RegExp("^\\s*(\\[|\\{)[ 	\r]*([+.]*)[ 	\r]*([^"+E+`]*)[ 	\r]*(?:\\]|\\}).*?(
|\r|$)`),N={},h=N,w=[],r=void 0,M=null,P=null,W="",T=!1,O=O||{};for(O.comments!==!0&&(O.comments=!1);o;){var v;C.exec(o)?(v=C.exec(o),te(v[1].toLowerCase())):!T&&_.exec(o)&&(!r||r.arrayType!=="simple")?(v=_.exec(o),Z(v[1],v[2]||"")):!T&&S.exec(o)&&r&&r.array&&r.arrayType!=="complex"&&r.arrayType!=="freeform"&&r.flags.indexOf("+")<0?(v=S.exec(o),ce(v[1])):!T&&m.exec(o)?(v=m.exec(o),se(v[1],v[2],v[3])):y.exec(o)?(v=y.exec(o),b(v[0])):(b(o),o=""),v&&(o=o.substring(v[0].length))}function Z(s,k){U(),A(s),r&&r.flags.indexOf("+")>-1&&(s="value"),P=s,W=k,re(s,{replace:!0})}function ce(s){U(),r.arrayType=r.arrayType||"simple",r.array.push(""),P=r.array,W=s,re(r.array,{replace:!0})}function te(s){if(T&&!(s==="endskip"||s==="ignore"))return U();switch(s){case"end":P&&re(P,{replace:!1});return;case"ignore":o="";break;case"skip":T=!0;break;case"endskip":T=!1;break}U()}function se(s,k,z){if(U(),z==""){var q=w.pop();h=(q?q.scope:N)||N,r=w[w.length-1]}else if(s==="["||s==="{"){var F=!1,L=N;if(k.indexOf(".")>-1?(A(z),F=!0,r&&(L=h)):(h=N,w=[]),r&&r.flags.indexOf("+")>-1)var X=z;else{for(var ee=z.split("."),ae=0;ae<ee.length-1;ae++)L=L[ee[ae]]=L[ee[ae]]||{};var X=ee[ee.length-1]}var Y={array:null,arrayType:null,arrayFirstKey:null,flags:k,scope:h},fe=r&&r.flags.indexOf("+")>-1&&k.indexOf(".")>-1;s=="["?(fe&&(X="value"),Y.array=L[X]=[],k.indexOf("+")>-1&&(Y.arrayType="freeform"),F?w.push(Y):w=[Y],r=w[w.length-1]):s=="{"&&(F?(fe?h=h.value={}:h=L[X]=L={},w.push(Y)):(h=L[X]=typeof L[X]=="object"?L[X]:{},w=[Y]),r=w[w.length-1])}}function b(s){r&&r.flags.indexOf("+")>-1&&s.match(/[^\n\r\s]/)?r.array.push({type:"text",value:s.replace(/(^\s*)|(\s*$)/g,"")}):W+=o.substring(0,s.length)}function A(s){if(r&&r.array){if(r.arrayType=r.arrayType||"complex",r.arrayType==="simple")return;(r.arrayFirstKey===null||r.arrayFirstKey===s)&&r.array.push(h={}),r.flags.indexOf("+")>-1?h.type=s:r.arrayFirstKey=r.arrayFirstKey||s}}function V(s,k){return O.comments&&(s=s.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/mg,""),s=s.replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),k=="append"&&(s=s.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),s}function U(){var s=W+"";return W="",P=null,s}function re(s,k){k=k||{};var z=P,q=U();if(k.replace?(q=V(q,"replace").replace(new RegExp("^\\s*"),""),W=new RegExp("\\s*$").exec(q)[0],P=z):q=V(q,"append"),typeof s=="object")k.replace&&(s[s.length-1]=""),s[s.length-1]+=q.replace(new RegExp("\\s*$"),"");else{var F=s.split(".");M=h;for(var L=0;L<F.length-1;L++)typeof M[F[L]]=="string"&&(M[F[L]]={}),M=M[F[L]]=M[F[L]]||{};k.replace&&(M[F[F.length-1]]=""),M[F[F.length-1]]+=q.replace(new RegExp("\\s*$"),"")}}return U(),N}var g={load:d};t.exports&&(i=t.exports=g),i.archieml=g}).call(ba)})(de,de.exports)),de.exports}var pa=ha();const xa=ga(pa);var ya=Q("<h4> </h4>"),wa=Q("<p><!></p>"),La=Q('<div class="mm-modal-backdrop svelte-qik81a" role="presentation"><div class="mm-modal svelte-qik81a" role="dialog" aria-modal="true" tabindex="0"><!> <!> <div class="mm-modal-actions svelte-qik81a"><button class="button-outline"> </button> <button class="button"> </button></div></div></div>');function Ca(t,i){Ee(i,!1);let d=B(i,"open",8,!1),g=B(i,"title",8,""),o=B(i,"message",8,""),l=B(i,"confirmLabel",8,"Apagar"),f=B(i,"cancelLabel",8,"Cancelar");const E=Se();function y(){E("cancel")}function _(){E("confirm")}function C(h){h.target===h.currentTarget&&y()}Ae();var S=qe(),m=pe(S);{var N=h=>{var w=La(),r=p(w),M=p(r);{var P=b=>{var A=ya(),V=p(A,!0);x(A),ne(()=>he(V,g())),R(b,A)};_e(M,b=>{g()&&b(P)})}var W=j(M,2);{var T=b=>{var A=wa(),V=p(A);ua(V,o),x(A),R(b,A)},O=b=>{var A=qe(),V=pe(A);Fe(V,i,"default",{}),R(b,A)};_e(W,b=>{o()?b(T):b(O,!1)})}var v=j(W,2),Z=p(v),ce=p(Z,!0);x(Z);var te=j(Z,2),se=p(te,!0);x(te),x(v),x(r),x(w),ne(()=>{ie(r,"aria-label",g()||"Confirmação"),he(ce,f()),he(se,l())}),J("click",Z,y),J("click",te,_),J("click",r,fa(function(b){da.call(this,i,b)})),J("keydown",r,b=>{b.key==="Escape"&&y()}),J("click",w,C),R(h,w)};_e(m,h=>{d()&&h(N)})}R(t,S),$e()}var ka=Q('<div role="toolbar"><!></div>');function Ea(t,i){let d=B(i,"ariaLabel",8,"Ferramentas"),g=B(i,"align",8,"end");var o=ka(),l=p(o);Fe(l,i,"default",{}),x(o),ne(()=>{je(o,1,`toolbar ${g()}`,"svelte-pv4j4e"),ie(o,"aria-label",d())}),R(t,o)}var $a=Q("<button><!></button>");function be(t,i){Ee(i,!1);let d=B(i,"ariaLabel",8,""),g=B(i,"title",8,""),o=B(i,"disabled",8,!1),l=B(i,"active",8,!1),f=B(i,"size",8,"md");const E=Se();function y(S){E("click",S)}Ae();var _=$a(),C=p(_);Fe(C,i,"default",{}),x(_),ne(()=>{je(_,1,`icon-btn ${l()?"active":""} ${f()}`,"svelte-hime8y"),_.disabled=o(),ie(_,"aria-label",d()||g()),ie(_,"title",g())}),J("click",_,y),R(t,_),$e()}var ja=Q("<option> </option>"),Aa=Q('<input type="text" placeholder="Nome da nova página" class="svelte-1jef3w8"/>'),Fa=Q("<em>I</em>"),Ra=Je('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.07 0l2.83-2.83a5 5 0 1 0-7.07-7.07L11 4"></path><path d="M14 11a5 5 0 0 0-7.07 0L4.1 13.83a5 5 0 0 0 7.07 7.07L13 20"></path></svg>'),Ma=Q("<!> <!> <!> <!>",1),Pa=Q('<main><div class="row svelte-1jef3w8"><div class="column svelte-1jef3w8" style="flex:0 0 200px;"><div class="brand svelte-1jef3w8"><img alt="FAB.io" width="120" height="24" class="svelte-1jef3w8"/></div> <label class="svelte-1jef3w8"><select class="svelte-1jef3w8"><!><option>Nova página...</option></select> <!></label> <div><label class="svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> Título do menu</label> <input type="text" placeholder="Título (opcional)" class="svelte-1jef3w8"/></div></div> <div class="column svelte-1jef3w8" style="flex:1; padding-left:1rem;"><textarea class="text svelte-1jef3w8" rows="20" cols="60" placeholder="Digite o conteúdo aqui..." style="width:100%"></textarea> <div class="saveContent-container svelte-1jef3w8"><!> <!> <!> <a class="button">Sair</a></div></div></div></main> <!>',1);function Ua(t,i){Ee(i,!1);const d=()=>sa(oe,"$archiePages",g),[g,o]=na();let l=G(""),f=G("index"),E=G(""),y=G(!0),_=G(""),C=G(""),S=G(!1),m=G();function N(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0,u=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=`<strong>${$||""}</strong>`;c(l,u+K+D);const I=(u+K).length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}function h(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0,u=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=`<em>${$||""}</em>`;c(l,u+K+D);const I=(u+K).length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}function w(a){try{const n=String(a||"").trim();return n?!!(/^(https?:|mailto:|tel:)/i.test(n)||n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||n.startsWith("#")):!1}catch{return!1}}function r(){const a=window.prompt("URL do link (http(s)://, mailto:, tel:, ou caminho relativo):","https://");if(w(a)&&e(m)){e(m).focus();const n=e(m).selectionStart??0,u=e(m).selectionEnd??0,$=e(l).slice(0,n),D=e(l).slice(n,u)||"link",K=e(l).slice(u),I=`<a href="${a}" target="_blank">${D}</a>`;c(l,$+I+K);const H=($+I).length;requestAnimationFrame(()=>e(m).setSelectionRange(H,H))}}function M(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0;if(a===n)return;const u=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=$.replace(/<\/?(?:strong|em|b|i)\s*>/gi,"").replace(/<a\b[^>]*>/gi,"").replace(/<\/a>/gi,"");c(l,u+K+D);const I=u.length+K.length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}Qe(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>c(S,!0)):setTimeout(()=>c(S,!0),0)});let P=G(!1);async function W(){try{return xa.load(e(l)),oe.update(a=>(a[e(f)]={content:e(l),showInMenu:e(y),menuLabel:e(_)},a)),c(E,"Conteúdo salvo localmente!"),!0}catch(a){return c(E,"Erro no formato ArchieML: "+a),!1}}function T(){const n=Xe(oe)[e(f)];typeof n=="object"&&n!==null?(c(l,n.content||""),c(y,n.showInMenu!==!1),c(_,n.menuLabel||"")):(c(l,n||""),c(y,!0),c(_,""))}let O=G(!1),v=G(null);function Z(){return!e(f)||!d()[e(f)]||(c(v,e(f)),c(O,!0)),!1}function ce(){return c(O,!1),c(v,null),!1}function te(){return!e(v)||!d()[e(v)]?(c(O,!1),c(v,null),!1):(oe.update(a=>(delete a[e(v)],a)),c(l,""),c(E,`Página "${e(v)}" removida.`),c(f,"__nova__"),c(C,""),c(O,!1),c(v,null),!0)}Ke(()=>(e(P),d(),e(f)),()=>{!e(P)&&typeof d()=="object"&&Object.keys(d()).length&&(c(P,!0),e(f)||c(f,"index"),T())}),Ke(()=>e(E),()=>{}),aa(),Ae();var se=Pa(),b=pe(se);let A;var V=p(b),U=p(V),re=p(U),s=p(re);x(re);var k=j(re,2),z=p(k);ne(()=>{e(f),ta(()=>{e(C),e(l),e(y),d()})});var q=p(z);oa(q,1,()=>(d(),me(()=>Object.keys(d()))),a=>a,(a,n)=>{var u=ja(),$=p(u,!0);x(u);var D={};ne(()=>{he($,e(n)),D!==(D=e(n))&&(u.value=(u.__value=e(n))??"")}),R(a,u)});var F=j(q);F.value=F.__value="__nova__",x(z);var L=j(z,2);{var X=a=>{var n=Aa();we(n),Le(n,()=>e(C),u=>c(C,u)),J("keydown",n,u=>{u.key==="Enter"&&e(C)&&e(C)!=="__nova__"&&(c(f,e(C)),oe.update($=>($[e(f)]||($[e(f)]={content:"",showInMenu:!0,menuLabel:""}),$)),T(),u.target.blur())}),J("blur",n,()=>{e(C)&&e(C)!=="__nova__"&&(c(f,e(C)),oe.update(u=>(u[e(f)]||(u[e(f)]={content:"",showInMenu:!0,menuLabel:""}),u)),T())}),R(a,n)};_e(L,a=>{e(f)==="__nova__"&&a(X)})}x(k);var ee=j(k,2),ae=p(ee),Y=p(ae);we(Y),ye(),x(ae);var fe=j(ae,2);we(fe),x(ee),x(U);var Re=j(U,2),ue=p(Re);ra(ue),ca(ue,a=>c(m,a),()=>e(m));var Me=j(ue,2),Pe=p(Me);Ea(Pe,{align:"end",ariaLabel:"Ferramentas do editor",children:(a,n)=>{var u=Ma(),$=pe(u);be($,{title:"Negrito (Ctrl/Cmd+B)",ariaLabel:"Negrito",$$events:{click:N},children:(H,xe)=>{ye();var le=De("B");R(H,le)},$$slots:{default:!0}});var D=j($,2);be(D,{title:"Itálico (Ctrl/Cmd+I)",ariaLabel:"Itálico",$$events:{click:h},children:(H,xe)=>{var le=Fa();R(H,le)},$$slots:{default:!0}});var K=j(D,2);be(K,{title:"Link (Ctrl/Cmd+K)",ariaLabel:"Link",$$events:{click:r},children:(H,xe)=>{var le=Ra();R(H,le)},$$slots:{default:!0}});var I=j(K,2);be(I,{title:"Remover formatação (Ctrl/Cmd+0)",ariaLabel:"Limpar formatação",$$events:{click:M},children:(H,xe)=>{ye();var le=De("⌫");R(H,le)},$$slots:{default:!0}}),R(a,u)},$$slots:{default:!0}});var Te=j(Pe,2);ze(Te,{variant:"primary",handleClick:W,value:"Salvar",newValue:"Salvo!"});var Oe=j(Te,2);{var Ue=a=>{ze(a,{variant:"primary",handleClick:Z,value:"Apagar página"})};_e(Oe,a=>{e(f)!=="__nova__"&&a(Ue)})}var Ge=j(Oe,2);x(Me),x(Re),x(V),x(b);var He=j(b,2);{let a=la(()=>`Tem certeza que deseja apagar a página "${e(v)}"? Esta ação não pode ser desfeita.`);Ca(He,{get open(){return e(O)},title:"Confirmar exclusão",get message(){return e(a)},confirmLabel:"Apagar",cancelLabel:"Cancelar",$$events:{cancel:ce,confirm:te}})}ne((a,n)=>{A=je(b,1,"svelte-1jef3w8",null,A,{loaded:e(S)}),ie(s,"src",a),ie(Ge,"href",n)},[()=>(Ie(ge),me(()=>ge("/imgs/fabio_io.svg"))),()=>(Ie(ge),me(()=>ge("/")))]),ia(z,()=>e(f),a=>c(f,a)),J("change",z,()=>{e(f)==="__nova__"?(c(C,""),c(l,""),c(y,!0)):T()}),va(Y,()=>e(y),a=>c(y,a)),Le(fe,()=>e(_),a=>c(_,a)),Le(ue,()=>e(l),a=>c(l,a)),J("keydown",ue,a=>{const n=(a.key||"").toLowerCase();(a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey&&(n==="b"?(a.preventDefault(),N()):n==="i"?(a.preventDefault(),h()):n==="k"?(a.preventDefault(),r()):n==="0"&&(a.preventDefault(),M()))}),R(t,se),$e(),o()}export{Ua as component,Va as universal};
