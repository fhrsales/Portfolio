import"../chunks/Bzak7iHL.js";import"../chunks/CKArZUO8.js";import{c as Se,a as be,e as H,d as He,g as Je}from"../chunks/SYLf1UDd.js";import{aD as We,e as me,w as Ne,am as Qe,k as Ve,Z as ve,bf as Xe,as as Ye,p as ke,c as Oe,f as pe,a as R,o as Ee,q as J,a6 as b,a8 as k,a7 as p,t as ne,ah as De,ai as ea,h as e,i as Ke,s as c,n as Z,bg as aa,ao as we,bh as ta,aj as Ie,bi as ra,C as la}from"../chunks/Dru1obsd.js";import{i as _e,a as na,s as sa}from"../chunks/BOyBYJ26.js";import{s as ie,c as je,e as oa,d as ia,b as oe,f as ye,r as ge}from"../chunks/CSyy-APr.js";import{p as B,b as ca}from"../chunks/BzESWULr.js";import{i as Ae}from"../chunks/CioWWv__.js";import{s as fa,h as ua,B as ze}from"../chunks/C8WeTnOV.js";import{s as Fe}from"../chunks/DDOzXF9A.js";function Ce(t,i,d=i){var _=new WeakSet;We(t,"input",async o=>{var l=o?t.defaultValue:t.value;if(l=Le(t)?$e(l):l,d(l),ve!==null&&_.add(ve),await Qe(),l!==(l=i())){var u=t.selectionStart,F=t.selectionEnd;t.value=l??"",F!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(F,t.value.length))}}),(Ve&&t.defaultValue!==t.value||me(i)==null&&t.value)&&(d(Le(t)?$e(t.value):t.value),ve!==null&&_.add(ve)),Ne(()=>{var o=i();if(t===document.activeElement){var l=Xe??ve;if(_.has(l))return}Le(t)&&o===$e(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function va(t,i,d=i){We(t,"change",_=>{var o=_?t.defaultChecked:t.checked;d(o)}),(Ve&&t.defaultChecked!==t.checked||me(i)==null)&&d(t.checked),Ne(()=>{var _=i();t.checked=!!_})}function Le(t){var i=t.type;return i==="number"||i==="range"}function $e(t){return t===""?null:+t}function da(t,i){var l;var d=(l=t.$$events)==null?void 0:l[i.type],_=Ye(d)?d.slice():d==null?[]:[d];for(var o of _)o.call(this,i)}const ma=!1,_a=!1;throw new Error("A rota /admin só está disponível em desenvolvimento.");const Na=Object.freeze(Object.defineProperty({__proto__:null,prerender:ma,ssr:_a},Symbol.toStringTag,{value:"Module"}));function ga(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var de={exports:{}},ha=de.exports,Be;function ba(){return Be||(Be=1,(function(t,i){(function(){function d(o,q){var u="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF",F=u+"\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",E=new RegExp(`.*((\r|
)+)`),x=new RegExp("^\\s*([^"+F+`]+)[ 	\r]*:[ 	\r]*(.*(?:
|\r|$))`),C=new RegExp(`^\\s*:[ 	\r]*(endskip|ignore|skip|end).*?(
|\r|$)`,"i"),S=new RegExp(`^\\s*\\*[ 	\r]*(.*(?:
|\r|$))`),m=new RegExp("^\\s*(\\[|\\{)[ 	\r]*([+.]*)[ 	\r]*([^"+F+`]*)[ 	\r]*(?:\\]|\\}).*?(
|\r|$)`),W={},h=W,w=[],r=void 0,M=null,P=null,N="",T=!1,q=q||{};for(q.comments!==!0&&(q.comments=!1);o;){var v;C.exec(o)?(v=C.exec(o),te(v[1].toLowerCase())):!T&&x.exec(o)&&(!r||r.arrayType!=="simple")?(v=x.exec(o),Y(v[1],v[2]||"")):!T&&S.exec(o)&&r&&r.array&&r.arrayType!=="complex"&&r.arrayType!=="freeform"&&r.flags.indexOf("+")<0?(v=S.exec(o),ce(v[1])):!T&&m.exec(o)?(v=m.exec(o),se(v[1],v[2],v[3])):E.exec(o)?(v=E.exec(o),g(v[0])):(g(o),o=""),v&&(o=o.substring(v[0].length))}function Y(s,L){U(),j(s),r&&r.flags.indexOf("+")>-1&&(s="value"),P=s,N=L,re(s,{replace:!0})}function ce(s){U(),r.arrayType=r.arrayType||"simple",r.array.push(""),P=r.array,N=s,re(r.array,{replace:!0})}function te(s){if(T&&!(s==="endskip"||s==="ignore"))return U();switch(s){case"end":P&&re(P,{replace:!1});return;case"ignore":o="";break;case"skip":T=!0;break;case"endskip":T=!1;break}U()}function se(s,L,z){if(U(),z==""){var O=w.pop();h=(O?O.scope:W)||W,r=w[w.length-1]}else if(s==="["||s==="{"){var A=!1,y=W;if(L.indexOf(".")>-1?(j(z),A=!0,r&&(y=h)):(h=W,w=[]),r&&r.flags.indexOf("+")>-1)var Q=z;else{for(var ee=z.split("."),ae=0;ae<ee.length-1;ae++)y=y[ee[ae]]=y[ee[ae]]||{};var Q=ee[ee.length-1]}var X={array:null,arrayType:null,arrayFirstKey:null,flags:L,scope:h},fe=r&&r.flags.indexOf("+")>-1&&L.indexOf(".")>-1;s=="["?(fe&&(Q="value"),X.array=y[Q]=[],L.indexOf("+")>-1&&(X.arrayType="freeform"),A?w.push(X):w=[X],r=w[w.length-1]):s=="{"&&(A?(fe?h=h.value={}:h=y[Q]=y={},w.push(X)):(h=y[Q]=typeof y[Q]=="object"?y[Q]:{},w=[X]),r=w[w.length-1])}}function g(s){r&&r.flags.indexOf("+")>-1&&s.match(/[^\n\r\s]/)?r.array.push({type:"text",value:s.replace(/(^\s*)|(\s*$)/g,"")}):N+=o.substring(0,s.length)}function j(s){if(r&&r.array){if(r.arrayType=r.arrayType||"complex",r.arrayType==="simple")return;(r.arrayFirstKey===null||r.arrayFirstKey===s)&&r.array.push(h={}),r.flags.indexOf("+")>-1?h.type=s:r.arrayFirstKey=r.arrayFirstKey||s}}function V(s,L){return q.comments&&(s=s.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/mg,""),s=s.replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),L=="append"&&(s=s.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),s}function U(){var s=N+"";return N="",P=null,s}function re(s,L){L=L||{};var z=P,O=U();if(L.replace?(O=V(O,"replace").replace(new RegExp("^\\s*"),""),N=new RegExp("\\s*$").exec(O)[0],P=z):O=V(O,"append"),typeof s=="object")L.replace&&(s[s.length-1]=""),s[s.length-1]+=O.replace(new RegExp("\\s*$"),"");else{var A=s.split(".");M=h;for(var y=0;y<A.length-1;y++)typeof M[A[y]]=="string"&&(M[A[y]]={}),M=M[A[y]]=M[A[y]]||{};L.replace&&(M[A[A.length-1]]=""),M[A[A.length-1]]+=O.replace(new RegExp("\\s*$"),"")}}return U(),W}var _={load:d};t.exports&&(i=t.exports=_),i.archieml=_}).call(ha)})(de,de.exports)),de.exports}var pa=ba();const xa=ga(pa);var wa=J("<h4> </h4>"),ya=J("<p><!></p>"),Ca=J('<div class="mm-modal-backdrop svelte-qik81a" role="presentation"><div class="mm-modal svelte-qik81a" role="dialog" aria-modal="true" tabindex="0"><!> <!> <div class="mm-modal-actions svelte-qik81a"><button class="button-outline"> </button> <button class="button"> </button></div></div></div>');function La(t,i){ke(i,!1);let d=B(i,"open",8,!1),_=B(i,"title",8,""),o=B(i,"message",8,""),l=B(i,"confirmLabel",8,"Apagar"),u=B(i,"cancelLabel",8,"Cancelar");const F=Se();function E(){F("cancel")}function x(){F("confirm")}function C(h){h.target===h.currentTarget&&E()}Ae();var S=Oe(),m=pe(S);{var W=h=>{var w=Ca(),r=b(w),M=b(r);{var P=g=>{var j=wa(),V=b(j,!0);p(j),ne(()=>be(V,_())),R(g,j)};_e(M,g=>{_()&&g(P)})}var N=k(M,2);{var T=g=>{var j=ya(),V=b(j);ua(V,o),p(j),R(g,j)},q=g=>{var j=Oe(),V=pe(j);Fe(V,i,"default",{}),R(g,j)};_e(N,g=>{o()?g(T):g(q,!1)})}var v=k(N,2),Y=b(v),ce=b(Y,!0);p(Y);var te=k(Y,2),se=b(te,!0);p(te),p(v),p(r),p(w),ne(()=>{ie(r,"aria-label",_()||"Confirmação"),be(ce,u()),be(se,l())}),H("click",Y,E),H("click",te,x),H("click",r,fa(function(g){da.call(this,i,g)})),H("keydown",r,g=>{g.key==="Escape"&&E()}),H("click",w,C),R(h,w)};_e(m,h=>{d()&&h(W)})}R(t,S),Ee()}var $a=J('<div role="toolbar"><!></div>');function ka(t,i){let d=B(i,"ariaLabel",8,"Ferramentas"),_=B(i,"align",8,"end");var o=$a(),l=b(o);Fe(l,i,"default",{}),p(o),ne(()=>{je(o,1,`toolbar ${_()}`,"svelte-pv4j4e"),ie(o,"aria-label",d())}),R(t,o)}var Ea=J("<button><!></button>");function he(t,i){ke(i,!1);let d=B(i,"ariaLabel",8,""),_=B(i,"title",8,""),o=B(i,"disabled",8,!1),l=B(i,"active",8,!1),u=B(i,"size",8,"md");const F=Se();function E(S){F("click",S)}Ae();var x=Ea(),C=b(x);Fe(C,i,"default",{}),p(x),ne(()=>{je(x,1,`icon-btn ${l()?"active":""} ${u()}`,"svelte-hime8y"),x.disabled=o(),ie(x,"aria-label",d()||_()),ie(x,"title",_())}),H("click",x,E),R(t,x),Ee()}var ja=J("<option> </option>"),Aa=J('<input type="text" placeholder="Nome da nova página" class="svelte-1jef3w8"/>'),Fa=J("<em>I</em>"),Ra=ra('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.07 0l2.83-2.83a5 5 0 1 0-7.07-7.07L11 4"></path><path d="M14 11a5 5 0 0 0-7.07 0L4.1 13.83a5 5 0 0 0 7.07 7.07L13 20"></path></svg>'),Ma=J("<!> <!> <!> <!>",1),Pa=J('<main><div class="row svelte-1jef3w8"><div class="column svelte-1jef3w8" style="flex:0 0 200px;"><div class="brand svelte-1jef3w8"><img alt="FAB.io" width="120" height="24" class="svelte-1jef3w8"/></div> <label class="svelte-1jef3w8"><select class="svelte-1jef3w8"><!><option>Nova página...</option></select> <!></label> <div><label class="svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> Título do menu</label> <input type="text" placeholder="Título (opcional)" class="svelte-1jef3w8"/></div></div> <div class="column svelte-1jef3w8" style="flex:1; padding-left:1rem;"><textarea class="text svelte-1jef3w8" rows="20" cols="60" placeholder="Digite o conteúdo aqui..." style="width:100%"></textarea> <div class="saveContent-container svelte-1jef3w8"><!> <!> <!> <a class="button">Sair</a></div></div></div></main> <!>',1);function Va(t,i){ke(i,!1);const d=()=>sa(oe,"$archiePages",_),[_,o]=na();let l=Z(""),u=Z("index"),F=Z(""),E=Z(!0),x=Z(""),C=Z(""),S=Z(!1),m=Z();function W(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0,f=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=`<strong>${$||""}</strong>`;c(l,f+K+D);const I=(f+K).length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}function h(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0,f=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=`<em>${$||""}</em>`;c(l,f+K+D);const I=(f+K).length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}function w(a){try{const n=String(a||"").trim();return n?!!(/^(https?:|mailto:|tel:)/i.test(n)||n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||n.startsWith("#")):!1}catch{return!1}}function r(){const a=window.prompt("URL do link (http(s)://, mailto:, tel:, ou caminho relativo):","https://");if(w(a)&&e(m)){e(m).focus();const n=e(m).selectionStart??0,f=e(m).selectionEnd??0,$=e(l).slice(0,n),D=e(l).slice(n,f)||"link",K=e(l).slice(f),I=`<a href="${a}" target="_blank">${D}</a>`;c(l,$+I+K);const G=($+I).length;requestAnimationFrame(()=>e(m).setSelectionRange(G,G))}}function M(){if(e(m)){e(m).focus();const a=e(m).selectionStart??0,n=e(m).selectionEnd??0;if(a===n)return;const f=e(l).slice(0,a),$=e(l).slice(a,n),D=e(l).slice(n),K=$.replace(/<\/?(?:strong|em|b|i)\s*>/gi,"").replace(/<a\b[^>]*>/gi,"").replace(/<\/a>/gi,"");c(l,f+K+D);const I=f.length+K.length;requestAnimationFrame(()=>e(m).setSelectionRange(I,I))}}He(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>c(S,!0)):setTimeout(()=>c(S,!0),0)});let P=Z(!1);async function N(){try{return xa.load(e(l)),oe.update(a=>(a[e(u)]={content:e(l),showInMenu:e(E),menuLabel:e(x)},a)),c(F,"Conteúdo salvo localmente!"),!0}catch(a){return c(F,"Erro no formato ArchieML: "+a),!1}}function T(){const n=Je(oe)[e(u)];typeof n=="object"&&n!==null?(c(l,n.content||""),c(E,n.showInMenu!==!1),c(x,n.menuLabel||"")):(c(l,n||""),c(E,!0),c(x,""))}let q=Z(!1),v=Z(null);function Y(){return!e(u)||!d()[e(u)]||(c(v,e(u)),c(q,!0)),!1}function ce(){return c(q,!1),c(v,null),!1}function te(){return!e(v)||!d()[e(v)]?(c(q,!1),c(v,null),!1):(oe.update(a=>(delete a[e(v)],a)),c(l,""),c(F,`Página "${e(v)}" removida.`),c(u,"__nova__"),c(C,""),c(q,!1),c(v,null),!0)}De(()=>(e(P),d(),e(u)),()=>{!e(P)&&typeof d()=="object"&&Object.keys(d()).length&&(c(P,!0),e(u)||c(u,"index"),T())}),De(()=>e(F),()=>{}),ea(),Ae();var se=Pa(),g=pe(se);let j;var V=b(g),U=b(V),re=b(U),s=b(re);p(re);var L=k(re,2),z=b(L);ne(()=>{e(u),aa(()=>{e(C),e(l),e(E),d()})});var O=b(z);oa(O,1,()=>(d(),me(()=>Object.keys(d()))),a=>a,(a,n)=>{var f=ja(),$=b(f,!0);p(f);var D={};ne(()=>{be($,e(n)),D!==(D=e(n))&&(f.value=(f.__value=e(n))??"")}),R(a,f)});var A=k(O);A.value=A.__value="__nova__",p(z);var y=k(z,2);{var Q=a=>{var n=Aa();ye(n),Ce(n,()=>e(C),f=>c(C,f)),H("keydown",n,f=>{f.key==="Enter"&&e(C)&&e(C)!=="__nova__"&&(c(u,e(C)),oe.update($=>($[e(u)]||($[e(u)]={content:"",showInMenu:!0,menuLabel:""}),$)),T(),f.target.blur())}),H("blur",n,()=>{e(C)&&e(C)!=="__nova__"&&(c(u,e(C)),oe.update(f=>(f[e(u)]||(f[e(u)]={content:"",showInMenu:!0,menuLabel:""}),f)),T())}),R(a,n)};_e(y,a=>{e(u)==="__nova__"&&a(Q)})}p(L);var ee=k(L,2),ae=b(ee),X=b(ae);ye(X),we(),p(ae);var fe=k(ae,2);ye(fe),p(ee),p(U);var Re=k(U,2),ue=b(Re);ta(ue),ca(ue,a=>c(m,a),()=>e(m));var Me=k(ue,2),Pe=b(Me);ka(Pe,{align:"end",ariaLabel:"Ferramentas do editor",children:(a,n)=>{var f=Ma(),$=pe(f);he($,{title:"Negrito (Ctrl/Cmd+B)",ariaLabel:"Negrito",$$events:{click:W},children:(G,xe)=>{we();var le=Ie("B");R(G,le)},$$slots:{default:!0}});var D=k($,2);he(D,{title:"Itálico (Ctrl/Cmd+I)",ariaLabel:"Itálico",$$events:{click:h},children:(G,xe)=>{var le=Fa();R(G,le)},$$slots:{default:!0}});var K=k(D,2);he(K,{title:"Link (Ctrl/Cmd+K)",ariaLabel:"Link",$$events:{click:r},children:(G,xe)=>{var le=Ra();R(G,le)},$$slots:{default:!0}});var I=k(K,2);he(I,{title:"Remover formatação (Ctrl/Cmd+0)",ariaLabel:"Limpar formatação",$$events:{click:M},children:(G,xe)=>{we();var le=Ie("⌫");R(G,le)},$$slots:{default:!0}}),R(a,f)},$$slots:{default:!0}});var Te=k(Pe,2);ze(Te,{variant:"primary",handleClick:N,value:"Salvar",newValue:"Salvo!"});var qe=k(Te,2);{var Ue=a=>{ze(a,{variant:"primary",handleClick:Y,value:"Apagar página"})};_e(qe,a=>{e(u)!=="__nova__"&&a(Ue)})}var Ze=k(qe,2);p(Me),p(Re),p(V),p(g);var Ge=k(g,2);{let a=la(()=>`Tem certeza que deseja apagar a página "${e(v)}"? Esta ação não pode ser desfeita.`);La(Ge,{get open(){return e(q)},title:"Confirmar exclusão",get message(){return e(a)},confirmLabel:"Apagar",cancelLabel:"Cancelar",$$events:{cancel:ce,confirm:te}})}ne((a,n,f)=>{j=je(g,1,"svelte-1jef3w8",null,j,a),ie(s,"src",n),ie(Ze,"href",f)},[()=>({loaded:e(S)}),()=>(Ke(ge),me(()=>ge("/imgs/fabio_io.svg"))),()=>(Ke(ge),me(()=>ge("/")))]),ia(z,()=>e(u),a=>c(u,a)),H("change",z,()=>{e(u)==="__nova__"?(c(C,""),c(l,""),c(E,!0)):T()}),va(X,()=>e(E),a=>c(E,a)),Ce(fe,()=>e(x),a=>c(x,a)),Ce(ue,()=>e(l),a=>c(l,a)),H("keydown",ue,a=>{const n=(a.key||"").toLowerCase();(a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey&&(n==="b"?(a.preventDefault(),W()):n==="i"?(a.preventDefault(),h()):n==="k"?(a.preventDefault(),r()):n==="0"&&(a.preventDefault(),M()))}),R(t,se),Ee(),o()}export{Va as component,Na as universal};
