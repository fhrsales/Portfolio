var X=Object.defineProperty;var B=s=>{throw TypeError(s)};var J=(s,e,r)=>e in s?X(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var U=(s,e,r)=>J(s,typeof e!="symbol"?e+"":e,r),Y=(s,e,r)=>e.has(s)||B("Cannot "+r);var a=(s,e,r)=>(Y(s,e,"read from private field"),r?r.call(s):e.get(s)),v=(s,e,r)=>e.has(s)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,r),F=(s,e,r,t)=>(Y(s,e,"write to private field"),t?t.call(s,r):e.set(s,r),r);import{N as $,O as k,P as w,Q as ee,n as C,R as G,k as x,v as se,T as re,U as te,o as ae,l as ne,V as ie,W as fe,X as ue,Y as ce,t as le,s as K,Z as de,_ as oe,$ as Z,A as _e,h as g,y as z,a0 as he,a1 as ve,a2 as H,a3 as pe,G as D,a4 as be,a5 as Se,a6 as me,a7 as Pe,a8 as ge,a9 as Ae,aa as j,ab as q,j as Ee,ac as Re,u as Te,S as Ie,ad as Oe,ae as we,af as xe}from"./Hoo0YnsJ.js";import{s as ye,g as De}from"./CIy8foFG.js";var o,_,d,p,A,E,I;class Ne{constructor(e,r=!0){U(this,"anchor");v(this,o,new Map);v(this,_,new Map);v(this,d,new Map);v(this,p,new Set);v(this,A,!0);v(this,E,()=>{var e=$;if(a(this,o).has(e)){var r=a(this,o).get(e),t=a(this,_).get(r);if(t)k(t),a(this,p).delete(r);else{var i=a(this,d).get(r);i&&(a(this,_).set(r,i.effect),a(this,d).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),t=i.effect)}for(const[n,u]of a(this,o)){if(a(this,o).delete(n),n===e)break;const f=a(this,d).get(u);f&&(w(f.effect),a(this,d).delete(u))}for(const[n,u]of a(this,_)){if(n===r||a(this,p).has(n))continue;const f=()=>{if(Array.from(a(this,o).values()).includes(n)){var h=document.createDocumentFragment();re(u,h),h.append(C()),a(this,d).set(n,{effect:u,fragment:h})}else w(u);a(this,p).delete(n),a(this,_).delete(n)};a(this,A)||!t?(a(this,p).add(n),ee(u,f,!1)):f()}}});v(this,I,e=>{a(this,o).delete(e);const r=Array.from(a(this,o).values());for(const[t,i]of a(this,d))r.includes(t)||(w(i.effect),a(this,d).delete(t))});this.anchor=e,F(this,A,r)}ensure(e,r){var t=$,i=te();if(r&&!a(this,_).has(e)&&!a(this,d).has(e))if(i){var n=document.createDocumentFragment(),u=C();n.append(u),a(this,d).set(e,{effect:G(()=>r(u)),fragment:n})}else a(this,_).set(e,G(()=>r(this.anchor)));if(a(this,o).set(t,e),i){for(const[f,c]of a(this,_))f===e?t.skipped_effects.delete(c):t.skipped_effects.add(c);for(const[f,c]of a(this,d))f===e?t.skipped_effects.delete(c.effect):t.skipped_effects.add(c.effect);t.oncommit(a(this,E)),t.ondiscard(a(this,I))}else x&&(this.anchor=se),a(this,E).call(this)}}o=new WeakMap,_=new WeakMap,d=new WeakMap,p=new WeakMap,A=new WeakMap,E=new WeakMap,I=new WeakMap;function $e(s,e,r=!1){x&&ne();var t=new Ne(s),i=r?ie:0;function n(u,f){if(x){const h=fe(s)===ue;if(u===h){var c=ce();le(c),t.anchor=c,K(!1),t.ensure(u,f),K(!0);return}}t.ensure(u,f)}ae(()=>{var u=!1;e((f,c=!0)=>{u=!0,n(c,f)}),u||n(!1,null)},i)}let T=!1,y=Symbol();function Ce(s,e,r){const t=r[e]??(r[e]={store:null,source:_e(void 0),unsubscribe:Z});if(t.store!==s&&!(y in r))if(t.unsubscribe(),t.store=s??null,s==null)t.source.v=void 0,t.unsubscribe=Z;else{var i=!0;t.unsubscribe=ye(s,n=>{i?t.source.v=n:z(t.source,n)}),i=!1}return s&&y in r?De(s):g(t.source)}function Ge(){const s={};function e(){de(()=>{for(var r in s)s[r].unsubscribe();oe(s,y,{enumerable:!1,value:!0})})}return[s,e]}function Me(s){var e=T;try{return T=!1,[s(),T]}finally{T=e}}const Le={get(s,e){if(!s.exclude.includes(e))return g(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,r){if(!(e in s.special)){var t=D;try{q(s.parent_effect),s.special[e]=Be({get[e](){return s.props[e]}},e,H)}finally{q(t)}}return s.special[e](r),j(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),j(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Ke(s,e){return new Proxy({props:s,exclude:e,special:{},version:Se(0),parent_effect:D},Le)}function Be(s,e,r,t){var M;var i=!me||(r&Pe)!==0,n=(r&Ae)!==0,u=(r&xe)!==0,f=t,c=!0,h=()=>(c&&(c=!1,f=u?Te(t):t),f),S;if(n){var Q=Ie in s||Oe in s;S=((M=he(s,e))==null?void 0:M.set)??(Q&&e in s?l=>s[e]=l:void 0)}var m,N=!1;n?[m,N]=Me(()=>s[e]):m=s[e],m===void 0&&t!==void 0&&(m=h(),S&&(i&&ve(),S(m)));var b;if(i?b=()=>{var l=s[e];return l===void 0?h():(c=!0,l)}:b=()=>{var l=s[e];return l!==void 0&&(f=void 0),l===void 0?f:l},i&&(r&H)===0)return b;if(S){var V=s.$$legacy;return(function(l,R){return arguments.length>0?((!i||!R||V||N)&&S(R?b():l),l):b()})}var O=!1,P=((r&we)!==0?Ee:ge)(()=>(O=!1,b()));n&&g(P);var W=D;return(function(l,R){if(arguments.length>0){const L=R?g(P):i&&n?pe(l):l;return z(P,L),O=!0,f!==void 0&&(f=L),l}return Re&&O||(W.f&be)!==0?P.v:g(P)})}export{Ne as B,Ge as a,$e as i,Ke as l,Be as p,Ce as s};
